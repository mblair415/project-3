<p id="notice"><%= notice %></p>

<!-- NEXT STEPS
* readme
* finish UI stuff.
  go through each page again and look for bugs
* add more seed data.
* make the posts alternate between post image left+post text right and visa versa
  should be able to use index of post % 2 == 0 to alternate on way and the other
  should be able to add and remove classes (left and right) to do it.
* limit number of posts on the front page.
  * set up a button to view more posts that will grab the next x posts and place them on front page.
* changes for the create and edit post page (save comment is the right button).
  * make sure to change that button to a real button
* changes for the log in and sign up pages.
  * make sure buttons are "buttons" (save comment is the right button)
-->

<% if current_user %>
  <div class="add-comment">
    <%= link_to new_post_path, :class => 'waves-effect waves-light btn' do %>
      <i class="material-icons left">comment</i>New Post
    <% end %>
  </div>
<% end %>

<div>
  <% @posts.each do |post| %>
    <div class="row card post-show-card">
      <div class="post-details col s12 m6 l8">
        <div class="row">
          <div class="author-image s6 left">
            <img class="responsive-img" src="<%= post.user.profile_picture %>" alt="member profile image goes here" />
          </div>
          <div class="post-author col s6">
           <b>Author: </b> <%= link_to "#{post.user.user_name}", user_path(post.user_id) %>
          </div>
          <div class="post-author col s6">
            <b>Posted: </b><%= post.created_at.to_date %>
          </div>
        </div>
        <div class="post-title center col s12">
          <h3><%= link_to "#{post.title}", post_path(post.id) %></h3>
        </div>
        <div class="post-content col s12">
          <h6><%= post.content %></h6>
        </div>
      </div>
      <div class="image col l4 m6 s12">
        <img class="responsive-image" src="<%= post.post_image %>" alt="post image" />
      </div>
      <div class="post-comment">
        <div class="card col s12">
          <% if post.comments.last %>
            <div class="row">
              <div class="comment-author-image s3 m1 left">
                <img class="responsive-img" src="<%= post.comments.last.user.profile_picture %>" alt="member profile image goes here" />
              </div>
              <div class="comment-author col s7">
                <b>Author: </b><%= link_to "#{User.find_by_id(post.comments.last.user_id).user_name}", user_path(post.comments.last.user_id) %>
                <div class="comment-content col s12">
                  <%= post.comments.last.content %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if current_user %>
  <div class="add-comment2">
    <%= link_to new_post_path, :class => 'waves-effect waves-light btn' do %>
      <i class="material-icons left">comment</i>New Post
    <% end %>
  </div>
<% end %>
